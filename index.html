<!doctype html>
<html lang="en">
	<head>
		<meta charset="UTF-8" />
		<title>Lease Contract Comparison</title>
		<style>
			body {
				font-family: Arial, sans-serif;
				margin: 40px;
				background-color: #f9f9f9;
			}
			h1 {
				text-align: center;
				color: #333;
			}
			.controls {
				display: flex;
				justify-content: space-between;
				align-items: center;
				margin-bottom: 30px;
				flex-wrap: wrap;
			}
			.language-toggle {
				margin-bottom: 10px;
			}
			.inputs {
				display: flex;
				gap: 20px;
				flex-wrap: wrap;
			}
			.input-group {
				display: flex;
				flex-direction: column;
				align-items: flex-start;
			}
			.input-group label {
				margin-bottom: 5px;
				font-weight: bold;
			}
			.input-group input {
				padding: 5px;
				width: 150px;
			}
			table {
				width: 100%;
				border-collapse: collapse;
				background-color: #fff;
			}
			th,
			td {
				border: 1px solid #ddd;
				padding: 12px;
				text-align: center;
			}
			th {
				background-color: #4caf50;
				color: white;
			}
			tr:nth-child(even) {
				background-color: #f2f2f2;
			}
			.better {
				color: green;
				font-weight: bold;
			}
			.worse {
				color: red;
				font-weight: bold;
			}
		</style>
	</head>
	<body>
		<h1 id="title">Lease Contract Comparison</h1>

		<div class="controls">
			<!-- Language Toggle -->
			<div class="language-toggle">
				<label for="languageSelect"
					><strong>Select Language:</strong></label
				>
				<select id="languageSelect">
					<option value="en">English</option>
					<option value="th">ไทย</option>
				</select>
			</div>

			<!-- Input Fields -->
			<div class="inputs">
				<div class="input-group">
					<label for="shortContractCost"
						>Three-Month Contract Cost (฿):</label
					>
					<input
						type="number"
						id="shortContractCost"
						value="27000"
						min="0"
					/>
				</div>
				<div class="input-group">
					<label for="yearlyContractCost"
						>Yearly Contract Cost (฿):</label
					>
					<input
						type="number"
						id="yearlyContractCost"
						value="24000"
						min="0"
					/>
				</div>
				<div class="input-group">
					<label for="depositAmount">Deposit Amount (฿):</label>
					<input
						type="number"
						id="depositAmount"
						value="26000"
						min="0"
					/>
				</div>
			</div>
		</div>

		<table>
			<thead>
				<tr>
					<th id="monthHeader">Month</th>
					<th id="yearlyHeader">Yearly Contract (฿)</th>
					<th id="shortHeader">Short-Term Contract (฿)</th>
					<th id="comparisonHeader">
						Which Contract is More Beneficial
					</th>
				</tr>
			</thead>
			<tbody id="comparisonTable">
				<!-- Table will be populated by JavaScript -->
			</tbody>
		</table>

		<script>
			// Language Data
			const translations = {
				en: {
					title: 'Lease Contract Comparison',
					languageLabel: 'Select Language:',
					shortContractCost: 'Three-Month Contract Cost (฿):',
					yearlyContractCost: 'Yearly Contract Cost (฿):',
					depositAmount: 'Deposit Amount (฿):',
					month: 'Month',
					yearly: 'Yearly Contract (฿)',
					short: 'Short-Term Contract (฿)',
					comparison: 'Which Contract is More Beneficial',
					better: 'Yearly is more beneficial by',
					worse: 'Short-Term is more beneficial by',
					same: 'Same cost',
					lostDeposit: '(Deposit Lost)',
					returnedDeposit: '(Deposit Returned)',
				},
				th: {
					title: 'การเปรียบเทียบสัญญาเช่า',
					languageLabel: 'เลือกภาษา:',
					shortContractCost: 'ค่าเช่าสัญญาระยะสั้น (฿):',
					yearlyContractCost: 'ค่าเช่าสัญญารายปี (฿):',
					depositAmount: 'จำนวนเงินมัดจำ (฿):',
					month: 'เดือน',
					yearly: 'สัญญารายปี (฿)',
					short: 'สัญญาระยะสั้น (฿)',
					comparison: 'สัญญาเช่าไหนคุ้มกว่ากัน',
					better: 'สัญญารายปีคุ้มค่ากว่าด้วยจำนวนเงินเพิ่มขึ้น',
					worse: 'สัญญาระยะสั้นคุ้มค่ากว่าด้วยจำนวนเงินเพิ่มขึ้น',
					same: 'ค่าใช้จ่ายเท่ากัน',
					lostDeposit: '(มัดจำสูญหาย)',
					returnedDeposit: '(คืนมัดจำ)',
				},
			}

			// Default Language
			let currentLanguage = 'en'

			// Get Elements
			const languageSelect = document.getElementById('languageSelect')
			const title = document.getElementById('title')
			const monthHeader = document.getElementById('monthHeader')
			const yearlyHeader = document.getElementById('yearlyHeader')
			const shortHeader = document.getElementById('shortHeader')
			const comparisonHeader = document.getElementById('comparisonHeader')

			const shortContractCostInput =
				document.getElementById('shortContractCost')
			const yearlyContractCostInput =
				document.getElementById('yearlyContractCost')
			const depositAmountInput = document.getElementById('depositAmount')

			const tableBody = document.getElementById('comparisonTable')

			// Function to update language
			function updateLanguage() {
				const texts = translations[currentLanguage]
				title.textContent = texts.title
				document.querySelector(
					'label[for="languageSelect"]',
				).textContent = `${texts.languageLabel}`
				document.querySelector(
					'label[for="shortContractCost"]',
				).textContent = texts.shortContractCost
				document.querySelector(
					'label[for="yearlyContractCost"]',
				).textContent = texts.yearlyContractCost
				document.querySelector(
					'label[for="depositAmount"]',
				).textContent = texts.depositAmount

				monthHeader.textContent = texts.month
				yearlyHeader.textContent = texts.yearly
				shortHeader.textContent = texts.short
				comparisonHeader.textContent = texts.comparison

				generateTable()
			}

			// Function to format numbers with space as thousand separator
			function formatNumber(num) {
				return num.toString().replace(/\B(?=(\d{3})+(?!\d))/g, ' ')
			}

			// Function to determine if deposit is returned
			function isDepositReturned(contractType, month) {
				if (contractType === 'yearly') {
					return month === 12
				} else if (contractType === 'short') {
					return month % 3 === 0
				}
				return false
			}

			// Function to generate the comparison table
			function generateTable() {
				// Clear existing table
				tableBody.innerHTML = ''

				// Get input values
				const shortMonthly =
					parseFloat(shortContractCostInput.value) || 0
				const yearlyMonthly =
					parseFloat(yearlyContractCostInput.value) || 0
				const deposit = parseFloat(depositAmountInput.value) || 0

				for (let month = 1; month <= 12; month++) {
					// Calculate costs for yearly contract
					const yearlyRent = yearlyMonthly * month
					const yearlyDeposit = isDepositReturned('yearly', month)
						? 0
						: deposit
					const yearlyTotal = yearlyRent + yearlyDeposit

					// Calculate costs for short-term contract
					const shortRent = shortMonthly * month
					const shortDeposit = isDepositReturned('short', month)
						? 0
						: deposit
					const shortTotal = shortRent + shortDeposit

					// Determine which contract is better
					let comparison = ''
					const texts = translations[currentLanguage]
					if (yearlyTotal < shortTotal) {
						const difference = shortTotal - yearlyTotal
						comparison = `<span class="better">${texts.better} ${formatNumber(difference)} ฿</span>`
					} else if (yearlyTotal > shortTotal) {
						const difference = yearlyTotal - shortTotal
						comparison = `<span class="worse">${texts.worse} ${formatNumber(difference)} ฿</span>`
					} else {
						comparison = `${texts.same} (${formatNumber(yearlyTotal)} ฿)`
					}

					// Create table row
					const row = `
                    <tr>
                        <td>${month}</td>
                        <td>
                            ${formatNumber(yearlyRent)} + ${yearlyDeposit > 0 ? formatNumber(yearlyDeposit) + ' ฿ ' + translations[currentLanguage].lostDeposit : '฿0 ' + translations[currentLanguage].returnedDeposit} = <strong>${formatNumber(yearlyTotal)} ฿</strong>
                        </td>
                        <td>
                            ${formatNumber(shortRent)} + ${shortDeposit > 0 ? formatNumber(shortDeposit) + ' ฿ ' + translations[currentLanguage].lostDeposit : '฿0 ' + translations[currentLanguage].returnedDeposit} = <strong>${formatNumber(shortTotal)} ฿</strong>
                        </td>
                        <td>${comparison}</td>
                    </tr>
                `
					tableBody.innerHTML += row
				}
			}

			// Event Listeners
			languageSelect.addEventListener('change', e => {
				currentLanguage = e.target.value
				updateLanguage()
			})

			shortContractCostInput.addEventListener('input', generateTable)
			yearlyContractCostInput.addEventListener('input', generateTable)
			depositAmountInput.addEventListener('input', generateTable)

			// Initialize
			updateLanguage()
		</script>
	</body>
</html>
